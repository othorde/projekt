{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\src\\\\components\\\\MoveBike\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState, useContext } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport Api from \"../../api\";\nimport AppContext from \"../../AppContext\";\nimport { StyleMoveBike } from './Form.styles.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MoveBike(props) {\n  _s();\n\n  const myContext = useContext(AppContext);\n  const [charging_posts, setCharging_posts] = useState([]);\n  const [moveBikeToColor, setMoveBikeToColor] = useState(\"\");\n  const {\n    handleSubmit\n  } = useForm();\n  /* funktionen hämtar den stad där cykeln befinner sig \n     loopar igenom och sparar position och färgkod för laddningsstationen \n     Kontrollera denna när vi har fler laddningsstationer\n     Bör va graphQl sen\n     */\n\n  async function getLoadStationsForMovingBike() {\n    let city = await Api.getACity(props.city);\n    city[0].charging_posts.forEach(elem => {\n      setCharging_posts([elem]);\n    });\n  } // Vad behöver uppdateras?\n  // Scooterns plats ny long lat\n  // Uppdatera hur många som finns i föregående zon\n  // uppdatera hur många som finns i den nya zonen\n  // Fortsätt här när backend är klar\n  // glöm ej att hantera fail och error\n  // var lat = y_min + (Math.random() * (y_max - y_min)); // lat = y\n  // var lng = x_min + (Math.random() * (x_max - x_min)); //lng = x\n\n  /* Får vilken färgkod som scootern ska skickas till\n      kontrollerar med färger för staden\n      räknar ut nya koordinater. random plats inom zonen.\n      Uppdaterar, antal cyklar i nuvarande zon samt ny zon\n  */\n\n\n  const onSubmit = async () => {\n    console.log(moveBikeToColor);\n\n    if (moveBikeToColor !== null) {// let position = props.position;\n      // let newPosition;\n      // let movedBy = myContext.user.username;\n      // let today = new Date();\n      // let date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\n      // let time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n      // let dateTime = date+' '+time;\n      // charging_posts.filter(elem=> elem.color.includes(moveBikeToColor) ? newPosition = elem.position : position = null)\n      // if ( position !== null) {\n      //     var lat = newPosition.polygonePart1.lat + (Math.random() * (newPosition.polygonePart4.lat - newPosition.polygonePart1.lat)); // lat = y\n      //     var lng = newPosition.polygonePart1.lng + (Math.random() * (newPosition.polygonePart4.lng - newPosition.polygonePart1.lng)); //lng = x\n      //     newPosition = {lat: lat, lng: lng}\n      //     var logg = `${dateTime} \\n \n      //         Moved(update) this bike (bikeId:${props.id}) \n      //         from position: lat: ${props.position.lat} lng: ${props.position.lng} to the ${moveBikeToColor} zon. \n      //         New exact position in zon: lat: ${newPosition.lat}, lng: ${newPosition.lng} .\n      //         Speed is now 0 and battery is charged from ${props.battery} to 100%.\n      //         This was carried out by ${movedBy}.\n      //     `;\n      //     let speed = \"0\";\n      //     let battery = \"100\";\n      //     let response = await Api.updateAScooter(props.id, speed, battery, newPosition, logg);\n      // }\n    }\n  };\n\n  const handleSubmits = async event => {\n    console.log(\"HEJ\");\n  };\n\n  const onChange = data => setMoveBikeToColor(data); // klar\n\n\n  console.log(moveBikeToColor);\n  return /*#__PURE__*/_jsxDEV(StyleMoveBike, {\n    onClick: getLoadStationsForMovingBike,\n    children: [\" \", /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        \"data-testid\": \"dropdown\",\n        onChange: e => {\n          handleSubmit(onChange(e.target.value));\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: moveBikeToColor,\n          children: \"-- V\\xE4lj vart cykeln ska f\\xF6rflyttas --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), charging_posts.map(elem => elem !== null && /*#__PURE__*/_jsxDEV(\"option\", {\n          value: elem.color,\n          children: elem.color + \"zon\"\n        }, elem.color, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onSubmit(),\n        children: \" F\\xF6rflytta cykel \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MoveBike, \"amhwnrPXxbcLAF6vUZq6+M1hBYg=\", false, function () {\n  return [useForm];\n});\n\n_c = MoveBike;\n\nvar _c;\n\n$RefreshReg$(_c, \"MoveBike\");","map":{"version":3,"sources":["C:/Users/Othor/dbwebb-kurser/frontendphp/webbclient/src/components/MoveBike/index.js"],"names":["React","useState","useContext","useForm","Api","AppContext","StyleMoveBike","MoveBike","props","myContext","charging_posts","setCharging_posts","moveBikeToColor","setMoveBikeToColor","handleSubmit","getLoadStationsForMovingBike","city","getACity","forEach","elem","onSubmit","console","log","handleSubmits","event","onChange","data","e","target","value","map","color"],"mappings":";;;AAAA,SAAQA,KAAR,EAAeC,QAAf,EAAyBC,UAAzB,QAA0C,OAA1C;AACA,SAASC,OAAT,QAAwB,iBAAxB;AAEA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAAQC,aAAR,QAA4B,kBAA5B;;AAEA,eAAe,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AAAA;;AACpC,QAAMC,SAAS,GAAGP,UAAU,CAACG,UAAD,CAA5B;AACA,QAAM,CAACK,cAAD,EAAiBC,iBAAjB,IAAsCV,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACW,eAAD,EAAkBC,kBAAlB,IAAwCZ,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM;AAAEa,IAAAA;AAAF,MAAmBX,OAAO,EAAhC;AAGA;AACJ;AACA;AACA;AACA;;AACI,iBAAeY,4BAAf,GAA8C;AAC1C,QAAIC,IAAI,GAAG,MAAMZ,GAAG,CAACa,QAAJ,CAAaT,KAAK,CAACQ,IAAnB,CAAjB;AACAA,IAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQN,cAAR,CAAuBQ,OAAvB,CAA+BC,IAAI,IAAI;AACnCR,MAAAA,iBAAiB,CAAC,CAACQ,IAAD,CAAD,CAAjB;AACH,KAFD;AAGH,GAjBmC,CAmBpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACJ;AACA;AACA;AACA;;;AACI,QAAMC,QAAQ,GAAG,YAAY;AACzBC,IAAAA,OAAO,CAACC,GAAR,CAAYV,eAAZ;;AACA,QAAIA,eAAe,KAAK,IAAxB,EAA8B,CAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ,GA7BD;;AAgCA,QAAMW,aAAa,GAAG,MAAOC,KAAP,IAAkB;AAEpCH,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACH,GAHD;;AAMA,QAAMG,QAAQ,GAAGC,IAAI,IAAIb,kBAAkB,CAACa,IAAD,CAA3C,CAtEoC,CAsEe;;;AACnDL,EAAAA,OAAO,CAACC,GAAR,CAAYV,eAAZ;AAEH,sBACO,QAAC,aAAD;AAAe,IAAA,OAAO,EAAIG,4BAA1B;AAAA,iCAEI;AAAA,8BACI;AAAQ,uBAAY,UAApB;AAA+B,QAAA,QAAQ,EAAGY,CAAD,IAAO;AAC5Cb,UAAAA,YAAY,CAACW,QAAQ,CAACE,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT,CAAZ;AACH,SAFD;AAAA,gCAGI;AAAQ,UAAA,KAAK,EAAEjB,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,EAIKF,cAAc,CAACoB,GAAf,CAAmBX,IAAI,IAAIA,IAAI,KAAK,IAAT,iBACxB;AAEI,UAAA,KAAK,EAAEA,IAAI,CAACY,KAFhB;AAAA,oBAGKZ,IAAI,CAACY,KAAL,GAAa;AAHlB,WACSZ,IAAI,CAACY,KADd;AAAA;AAAA;AAAA;AAAA,gBADH,CAJL;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAYI;AAAQ,QAAA,OAAO,EAAE,MAAMX,QAAQ,EAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAZJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADP;AAmBA;;GA5FuBb,Q;UAIKJ,O;;;KAJLI,Q","sourcesContent":["import {React, useState, useContext} from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nimport Api from \"../../api\";\nimport AppContext from \"../../AppContext\";\nimport {StyleMoveBike} from './Form.styles.js'\n\nexport default function MoveBike(props) {\n    const myContext = useContext(AppContext);\n    const [charging_posts, setCharging_posts] = useState([])\n    const [moveBikeToColor, setMoveBikeToColor] = useState(\"\")\n    const { handleSubmit } = useForm();\n\n\n    /* funktionen hämtar den stad där cykeln befinner sig \n       loopar igenom och sparar position och färgkod för laddningsstationen \n       Kontrollera denna när vi har fler laddningsstationer\n       Bör va graphQl sen\n       */\n    async function getLoadStationsForMovingBike() {\n        let city = await Api.getACity(props.city);\n        city[0].charging_posts.forEach(elem => {\n            setCharging_posts([elem])\n        })\n    }\n\n    // Vad behöver uppdateras?\n    // Scooterns plats ny long lat\n    // Uppdatera hur många som finns i föregående zon\n    // uppdatera hur många som finns i den nya zonen\n    // Fortsätt här när backend är klar\n    // glöm ej att hantera fail och error\n    // var lat = y_min + (Math.random() * (y_max - y_min)); // lat = y\n    // var lng = x_min + (Math.random() * (x_max - x_min)); //lng = x\n    /* Får vilken färgkod som scootern ska skickas till\n        kontrollerar med färger för staden\n        räknar ut nya koordinater. random plats inom zonen.\n        Uppdaterar, antal cyklar i nuvarande zon samt ny zon\n    */\n    const onSubmit = async () => {\n        console.log(moveBikeToColor)\n        if (moveBikeToColor !== null) {\n            // let position = props.position;\n            // let newPosition;\n            // let movedBy = myContext.user.username;\n            // let today = new Date();\n            // let date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\n            // let time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n            // let dateTime = date+' '+time;\n            \n            // charging_posts.filter(elem=> elem.color.includes(moveBikeToColor) ? newPosition = elem.position : position = null)\n            // if ( position !== null) {\n            //     var lat = newPosition.polygonePart1.lat + (Math.random() * (newPosition.polygonePart4.lat - newPosition.polygonePart1.lat)); // lat = y\n            //     var lng = newPosition.polygonePart1.lng + (Math.random() * (newPosition.polygonePart4.lng - newPosition.polygonePart1.lng)); //lng = x\n            //     newPosition = {lat: lat, lng: lng}\n\n            //     var logg = `${dateTime} \\n \n            //         Moved(update) this bike (bikeId:${props.id}) \n            //         from position: lat: ${props.position.lat} lng: ${props.position.lng} to the ${moveBikeToColor} zon. \n            //         New exact position in zon: lat: ${newPosition.lat}, lng: ${newPosition.lng} .\n            //         Speed is now 0 and battery is charged from ${props.battery} to 100%.\n            //         This was carried out by ${movedBy}.\n            //     `;\n            //     let speed = \"0\";\n            //     let battery = \"100\";\n            //     let response = await Api.updateAScooter(props.id, speed, battery, newPosition, logg);\n            // }\n        }\n    }\n\n    \n    const handleSubmits = async (event)  => {\n\n        console.log(\"HEJ\")\n    }\n\n\n    const onChange = data => setMoveBikeToColor(data); // klar\n    console.log(moveBikeToColor)\n\n\treturn (\n        <StyleMoveBike onClick = {getLoadStationsForMovingBike}> {/* laddar in ny info med onClick */}\n\n            <fieldset>\n                <select data-testid=\"dropdown\" onChange={(e) => {\n                    handleSubmit(onChange(e.target.value))\n                }}>\n                    <option value={moveBikeToColor}>-- Välj vart cykeln ska förflyttas --</option>\n                    {charging_posts.map(elem => elem !== null &&\n                        <option \n                            key={elem.color} \n                            value={elem.color}>\n                            {elem.color + \"zon\"}\n                        </option> )}\n                </select>\n                <button onClick={() => onSubmit()}> Förflytta cykel </button>\n            </fieldset>\n        </StyleMoveBike>\n\t);\n}\n\n\n"]},"metadata":{},"sourceType":"module"}