{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\src\\\\components\\\\Invoice\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useState } from \"react\"; //components\n\nimport Api from '../../api'; //styles & img\n\nimport { Container } from './Form.styles'; //other\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar pointInPolygon = require('point-in-polygon');\n\nconst userInvoiceInitialValue = {\n  tripId: \"\",\n  endedAtChargePoint: \"\",\n  endedAtLoadStation: \"\",\n  timeOfTrip: \"\",\n  startFee: 10,\n  discountStartFee: \"\"\n};\nexport default function Invoice(props) {\n  _s();\n\n  //hooks\n  // måste ha resan och koordinaterna\n  // måste senare räkna ut var koordinaterna ligger och jmföra\n  const [allCharging_posts, setAllCharging_posts] = useState([]); //parkering och laddstationer\n\n  const [allParkingZones, setAllParkingZones] = useState([]);\n  const [userTrips, setUserTrips] = useState([]);\n  const [userInvoice, setUserInvoice] = useState([userInvoiceInitialValue]);\n  /* Sparara alla ladda och parkeringszoner i state */\n\n  console.log(props);\n  useEffect(() => {\n    const getAllCities = async () => {\n      let allCities = await Api.getAllCitys();\n      allCities.forEach(element => {\n        setAllCharging_posts(element.charging_posts);\n        setAllParkingZones(element.parking_zones);\n      });\n    };\n\n    getAllCities();\n    setUserTrips(props);\n  }, []);\n\n  function checkAllUsersTrips() {\n    let arrayOfTrips = [];\n    userTrips.props.forEach(trip => {\n      var tripEnded = [trip.stop.position.lat, trip.stop.position.lng];\n      const atrip = {\n        tripId: trip.id,\n        endedAtChargePoint: \"\",\n        endedAtParkingZone: checkIfTripEndedAtParkingZone(tripEnded),\n        timeOfTrip: checkIfTripEndedAtChargingPost(tripEnded),\n        startFee: 10,\n        timeFee: \"\",\n        discountStartFee: \"\"\n      };\n      arrayOfTrips.push(atrip);\n    });\n    setUserInvoice(arrayOfTrips);\n  }\n  /* Kollar om resan slutade i en parkeringszon */\n\n\n  function checkIfTripEndedAtParkingZone(tripEnded) {\n    let res;\n\n    for (var elem of allParkingZones) {\n      console.log(\"ANDRA\");\n      let polyGon = [[elem.position.polygonePart1.lat, elem.position.polygonePart1.lng], [elem.position.polygonePart2.lat, elem.position.polygonePart2.lng], [elem.position.polygonePart3.lat, elem.position.polygonePart3.lng], [elem.position.polygonePart4.lat, elem.position.polygonePart4.lng]];\n      res = checkIfPointInPolyGon(tripEnded, polyGon);\n      console.log(res);\n      return res;\n    }\n  }\n\n  function checkIfTripEndedAtChargingPost(tripEnded) {\n    let res;\n    var tripEnded = [props.userHistory.stop.position.lat, props.userHistory.stop.position.lng];\n    allCharging_posts.forEach(element => {\n      let polyGon = [[element.position.polygonePart1.lat, element.position.polygonePart1.lng], [element.position.polygonePart2.lat, element.position.polygonePart2.lng], [element.position.polygonePart3.lat, element.position.polygonePart3.lng], [element.position.polygonePart4.lat, element.position.polygonePart4.lng]];\n      res = checkIfPointInPolyGon(tripEnded, polyGon);\n      console.log(res);\n    });\n  }\n\n  function checkIfPointInPolyGon(point, polygone) {\n    console.log(\"TREJDE\");\n    return pointInPolygon(point, polygone);\n  }\n\n  console.log(userInvoice);\n\n  async function calculateCost() {\n    checkAllUsersTrips();\n    /* checkIfTripEndedAtParkingZone()\n    checkIfTripEndedAtChargingPost()  */\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: calculateCost,\n    children: \"Faktura\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Invoice, \"T3Qm/KWOkE+ohdeV589GLCKLJtg=\");\n\n_c = Invoice;\n\nvar _c;\n\n$RefreshReg$(_c, \"Invoice\");","map":{"version":3,"sources":["C:/Users/Othor/dbwebb-kurser/frontendphp/webbclient/src/components/Invoice/index.js"],"names":["React","useEffect","useState","Api","Container","pointInPolygon","require","userInvoiceInitialValue","tripId","endedAtChargePoint","endedAtLoadStation","timeOfTrip","startFee","discountStartFee","Invoice","props","allCharging_posts","setAllCharging_posts","allParkingZones","setAllParkingZones","userTrips","setUserTrips","userInvoice","setUserInvoice","console","log","getAllCities","allCities","getAllCitys","forEach","element","charging_posts","parking_zones","checkAllUsersTrips","arrayOfTrips","trip","tripEnded","stop","position","lat","lng","atrip","id","endedAtParkingZone","checkIfTripEndedAtParkingZone","checkIfTripEndedAtChargingPost","timeFee","push","res","elem","polyGon","polygonePart1","polygonePart2","polygonePart3","polygonePart4","checkIfPointInPolyGon","userHistory","point","polygone","calculateCost"],"mappings":"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","sourcesContent":["import {React, useEffect, useState } from \"react\";\n\n//components\nimport Api from '../../api'\n//styles & img\nimport {Container} from './Form.styles'\n//other\nvar pointInPolygon = require('point-in-polygon');\n\n\nconst userInvoiceInitialValue = {\n    tripId: \"\",\n    endedAtChargePoint: \"\",\n    endedAtLoadStation: \"\",\n    timeOfTrip: \"\",\n    startFee: 10,\n    discountStartFee: \"\",\n}\n\n\nexport default function Invoice(props) {\n\t//hooks\n    // måste ha resan och koordinaterna\n    // måste senare räkna ut var koordinaterna ligger och jmföra\n\n    const [allCharging_posts, setAllCharging_posts] = useState([]) //parkering och laddstationer\n    const [allParkingZones, setAllParkingZones] = useState([])\n    const [userTrips, setUserTrips] = useState([]);\n    const [userInvoice, setUserInvoice] = useState([userInvoiceInitialValue])\n    /* Sparara alla ladda och parkeringszoner i state */\n \n    console.log(props)\n\n    useEffect(() => {\n        const getAllCities = async () => {\n\n        let allCities = await Api.getAllCitys();\n        allCities.forEach(element => {\n            setAllCharging_posts(element.charging_posts)\n            setAllParkingZones(element.parking_zones)\n            });\n        }\n        getAllCities()\n        setUserTrips(props)\n        \n    }, [])\n\n\n    function checkAllUsersTrips() {\n        let arrayOfTrips = []\n\n        userTrips.props.forEach(trip => {\n            var tripEnded = [trip.stop.position.lat, trip.stop.position.lng];\n\n            const atrip = { \n\t\t\t\ttripId: trip.id,\n                endedAtChargePoint: \"\",\n                endedAtParkingZone: checkIfTripEndedAtParkingZone(tripEnded),\n                timeOfTrip: checkIfTripEndedAtChargingPost(tripEnded),\n                startFee: 10,\n                timeFee: \"\",\n                discountStartFee: \"\",\n            }\n            arrayOfTrips.push(atrip);\n        })\n        setUserInvoice(arrayOfTrips)\n    }\n\n    \n    /* Kollar om resan slutade i en parkeringszon */\n    function checkIfTripEndedAtParkingZone(tripEnded) {\n        let res;\n\n       for (var elem of allParkingZones) {\n        console.log(\"ANDRA\");\n\n            let polyGon = \n            [\n                [elem.position.polygonePart1.lat,\n                elem.position.polygonePart1.lng],\n                [elem.position.polygonePart2.lat,\n                elem.position.polygonePart2.lng],\n                [elem.position.polygonePart3.lat,\n                elem.position.polygonePart3.lng],\n                [elem.position.polygonePart4.lat,\n                elem.position.polygonePart4.lng]\n            ]\n            res = checkIfPointInPolyGon(tripEnded, polyGon);\n            console.log(res)\n            return res\n       }\n       \n    }\n\n    function checkIfTripEndedAtChargingPost(tripEnded) {\n        let res;\n        var tripEnded = [props.userHistory.stop.position.lat, props.userHistory.stop.position.lng];\n        allCharging_posts.forEach(element => {\n            let polyGon=[\n                [ element.position.polygonePart1.lat, element.position.polygonePart1.lng],\n                [element.position.polygonePart2.lat, element.position.polygonePart2.lng],\n                [element.position.polygonePart3.lat, element.position.polygonePart3.lng],\n                [element.position.polygonePart4.lat, element.position.polygonePart4.lng ]\n            ]\n            res = checkIfPointInPolyGon(tripEnded, polyGon);\n            console.log(res)\n        });\n    }\n\n\n    function checkIfPointInPolyGon(point, polygone) {\n        console.log(\"TREJDE\");\n\n        return pointInPolygon(point, polygone);\n    }\n\n\n    console.log(userInvoice)\n\n\n    async function calculateCost() {\n       \n        checkAllUsersTrips()\n        /* checkIfTripEndedAtParkingZone()\n        checkIfTripEndedAtChargingPost()  */\n    }\n\n\treturn (\n        <button onClick={calculateCost}>Faktura</button>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}