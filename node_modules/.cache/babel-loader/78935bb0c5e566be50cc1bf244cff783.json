{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\src\\\\components\\\\Oauth\\\\index.js\";\nimport React, { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthorizationCodeCallback } from \"react-oauth2-auth-code-flow\";\nimport ClientOAuth2 from \"client-oauth2\"; //styles\n\nimport { Wrapper, Content, SignIn, Delimiter, ScooterImg } from './Form.styles.js';\nimport scooterPic from '../../images/scooter.png'; //other\n\nimport AppContext from '../../AppContext';\nimport Api from \"../../api.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nrequire('dotenv').config();\n\nconst Oauth = () => {\n  console.log(\"HEJ\");\n  const oauthClient = new ClientOAuth2({\n    clientId: process.env.GITHUB_CLIENT_ID,\n    clientSecret: process.env.GITHUB_CLIENT_SECRET,\n    accessTokenUri: `https://github.com/login/oauth/access_token`,\n\n    /* måste va rätt */\n    authorizationUri: \"https://github.com/login/oauth/authorize\",\n\n    /* måste ocksåva rätt */\n    redirectUri: \"http://localhost:3000/login/home\",\n    scopes: [\"identity\"]\n  });\n\n  const handleSubmit2 = async event => {\n    // kontrollera inlogg, kolla med servern om användaruppg är ok\n    // nu sparar jag lösen som vnaligt lösen, fixa\n    let res = oauthClient;\n    console.log(res); // localStorage.setItem('user', JSON.stringify(inputs));\n    // myContext.toggleAuth(true);\n    // navigate(\"/home\")\n\n    event.preventDefault();\n  };\n\n  handleSuccess = async (accessToken, _ref) => {\n    let {\n      response,\n      state\n    } = _ref;\n    console.log(\"Successfully authorized\");\n    await setProfileFromDropbox(accessToken);\n    await redirect(state.from);\n  };\n\n  handleError = error => {\n    console.error(\"An error occurred\");\n    console.error(error.message);\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthorizationCodeCallback, {\n    oauthClient: oauthClient,\n    onAuthSuccess: handleSuccess(),\n    onAuthError: handleError(),\n    render: _ref2 => {\n      let {\n        processing,\n        state,\n        error\n      } = _ref2;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [processing && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Authorizing now...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 30\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error\",\n          children: [\"An error occurred: \", error.message]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_c = Oauth;\nexport default Oauth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Oauth\");","map":{"version":3,"sources":["C:/Users/Othor/dbwebb-kurser/frontendphp/webbclient/src/components/Oauth/index.js"],"names":["React","useState","useContext","useNavigate","AuthorizationCodeCallback","ClientOAuth2","Wrapper","Content","SignIn","Delimiter","ScooterImg","scooterPic","AppContext","Api","require","config","Oauth","console","log","oauthClient","clientId","process","env","GITHUB_CLIENT_ID","clientSecret","GITHUB_CLIENT_SECRET","accessTokenUri","authorizationUri","redirectUri","scopes","handleSubmit2","event","res","preventDefault","handleSuccess","accessToken","response","state","setProfileFromDropbox","redirect","from","handleError","error","message","processing"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,UAAzB,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,yBAAT,QAA2C,6BAA3C;AACA,OAAOC,YAAP,MAAyB,eAAzB,C,CAEA;;AACA,SAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmCC,SAAnC,EAA8CC,UAA9C,QAAgE,kBAAhE;AACA,OAAOC,UAAP,MAAuB,0BAAvB,C,CAEA;;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,GAAP,MAAgB,cAAhB;;;AACAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAIA,MAAMC,KAAK,GAAG,MAAM;AAChBC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AAEA,QAAMC,WAAW,GAAG,IAAId,YAAJ,CAAiB;AACjCe,IAAAA,QAAQ,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADW;AAEjCC,IAAAA,YAAY,EAAEH,OAAO,CAACC,GAAR,CAAYG,oBAFO;AAGjCC,IAAAA,cAAc,EAAG,6CAHgB;;AAG8B;AAC/DC,IAAAA,gBAAgB,EAAE,0CAJe;;AAI6B;AAC9DC,IAAAA,WAAW,EAAE,kCALoB;AAMjCC,IAAAA,MAAM,EAAE,CAAC,UAAD;AANyB,GAAjB,CAApB;;AAWA,QAAMC,aAAa,GAAG,MAAOC,KAAP,IAAkB;AACpC;AACA;AAGA,QAAIC,GAAG,GAAGb,WAAV;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYc,GAAZ,EANoC,CAOpC;AACA;AACA;;AACAD,IAAAA,KAAK,CAACE,cAAN;AACH,GAXD;;AAeAC,EAAAA,aAAa,GAAG,OAAOC,WAAP,WAA4C;AAAA,QAAxB;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAwB;AACtDpB,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACA,UAAMoB,qBAAqB,CAACH,WAAD,CAA3B;AACA,UAAMI,QAAQ,CAACF,KAAK,CAACG,IAAP,CAAd;AACD,GAJL;;AAMAC,EAAAA,WAAW,GAAIC,KAAD,IAAW;AACnBzB,IAAAA,OAAO,CAACyB,KAAR,CAAc,mBAAd;AACAzB,IAAAA,OAAO,CAACyB,KAAR,CAAcA,KAAK,CAACC,OAApB;AACD,GAHL;;AAKA,sBACI,QAAC,yBAAD;AACE,IAAA,WAAW,EAAExB,WADf;AAEE,IAAA,aAAa,EAAEe,aAAa,EAF9B;AAGE,IAAA,WAAW,EAAEO,WAAW,EAH1B;AAIE,IAAA,MAAM,EAAE;AAAA,UAAC;AAAEG,QAAAA,UAAF;AAAcP,QAAAA,KAAd;AAAqBK,QAAAA;AAArB,OAAD;AAAA,0BACN;AAAA,mBACGE,UAAU,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADjB,EAEGF,KAAK,iBACJ;AAAG,UAAA,SAAS,EAAC,OAAb;AAAA,4CAAyCA,KAAK,CAACC,OAA/C;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADM;AAAA;AAJV;AAAA;AAAA;AAAA;AAAA,UADJ;AAeC,CAvDL;;KAAM3B,K;AAyDN,eAAeA,KAAf","sourcesContent":["import React, {useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthorizationCodeCallback  } from \"react-oauth2-auth-code-flow\";\nimport ClientOAuth2 from \"client-oauth2\";\n\n//styles\nimport { Wrapper, Content, SignIn, Delimiter, ScooterImg } from './Form.styles.js'\nimport scooterPic from '../../images/scooter.png'\n\n//other\nimport AppContext from '../../AppContext';\nimport Api from \"../../api.js\";\nrequire('dotenv').config()\n\n\n\nconst Oauth = () => {\n    console.log(\"HEJ\")\n\n    const oauthClient = new ClientOAuth2({\n        clientId: process.env.GITHUB_CLIENT_ID,\n        clientSecret: process.env.GITHUB_CLIENT_SECRET,\n        accessTokenUri: `https://github.com/login/oauth/access_token`, /* måste va rätt */\n        authorizationUri: \"https://github.com/login/oauth/authorize\", /* måste ocksåva rätt */\n        redirectUri: \"http://localhost:3000/login/home\",\n        scopes: [\"identity\"],\n    });\n\n\n  \n    const handleSubmit2 = async (event)  => {\n        // kontrollera inlogg, kolla med servern om användaruppg är ok\n        // nu sparar jag lösen som vnaligt lösen, fixa\n        \n\n        let res = oauthClient;\n        console.log(res)\n        // localStorage.setItem('user', JSON.stringify(inputs));\n        // myContext.toggleAuth(true);\n        // navigate(\"/home\")\n        event.preventDefault();\n    }\n\n\n    \n    handleSuccess = async (accessToken, { response, state }) => {\n          console.log(\"Successfully authorized\");\n          await setProfileFromDropbox(accessToken);\n          await redirect(state.from);\n        };\n      \n    handleError = (error) => {\n          console.error(\"An error occurred\");\n          console.error(error.message);\n        };\n\n    return (\n        <AuthorizationCodeCallback\n          oauthClient={oauthClient}\n          onAuthSuccess={handleSuccess()}\n          onAuthError={handleError()}\n          render={({ processing, state, error }) => (\n            <div>\n              {processing && <p>Authorizing now...</p>}\n              {error && (\n                <p className=\"error\">An error occurred: {error.message}</p>\n              )}\n            </div>\n          )}\n        />\n      );\n    }\n\nexport default Oauth\n"]},"metadata":{},"sourceType":"module"}