{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\src\\\\components\\\\Map\\\\BikeMarker.js\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useState, useRef } from \"react\"; //googlemap\n\nimport GoogleMapReact from \"google-map-react\"; //components\n\nimport useCurrentLocation from \"../../Hooks/currentPosition\";\nimport useSuperCluster from 'use-supercluster'; //styles\n\nimport { Style, BtnStyle } from './Form.styles';\nimport scooter from '../../images/bike.png';\nimport useSwr from \"swr\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst options = {\n  enableHighAccuracy: true,\n  timeout: 1000 * 60 * 1,\n  // 1 min\n  maximumAge: 1000 * 60 * 60 // 1 hour\n\n}; // style annorlunda jmf med komponenter. Se form.styles,  \n\nexport default function BikeMarker(markerState) {\n  _s();\n\n  const {\n    location,\n    err\n  } = useCurrentLocation(options);\n  console.log(location);\n  console.log(markerState.markerState.zoom);\n  const mapRef = useRef();\n  const [zoom, setZoom] = useState(markerState.markerState.zoom);\n  const [bounds, setBounds] = useState(markerState.markerState.bounds);\n  const url = \"https://data.police.uk/api/crimes-street/all-crime?lat=52.629729&lng=-1.131592&date=2020-01\";\n\n  const fetcher = function () {\n    return fetch(...arguments).then(response => response.json());\n  }; //gör om denna sen\n\n\n  const Marker = _ref => {\n    let {\n      children\n    } = _ref;\n    return children;\n  };\n\n  const {\n    data,\n    error\n  } = useSwr(url, fetcher); //gör om denna sen\n\n  const crimes = data && !error ? data : []; //clusters\n\n  const points = crimes.map(crime => ({\n    type: \"Feature\",\n    properties: {\n      cluster: false,\n      crimeId: crime.id,\n      category: crime.category\n    },\n    geometry: {\n      type: \"Point\",\n      coordinates: [parseFloat(crime.location.longitude), parseFloat(crime.location.latitude)]\n    }\n  }));\n  const {\n    clusters,\n    supercluster\n  } = useSuperCluster({\n    points,\n    bounds,\n    zoom,\n    options: {\n      radius: 75,\n      maxZoom: 20\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: clusters.map(cluster => {\n      const [longitude, latitude] = cluster.geometry.coordinates;\n      const {\n        cluster: isCluster,\n        point_count: pointCount\n      } = cluster.properties;\n\n      if (isCluster) {\n        return /*#__PURE__*/_jsxDEV(Marker, {\n          lat: latitude,\n          lng: longitude,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cluster-marker\",\n            style: {\n              width: `${10 + pointCount / points.length * 20}px`,\n              height: `${10 + pointCount / points.length * 20}px`\n            },\n            onClick: () => {\n              const expansionZoom = Math.min(supercluster.getClusterExpansionZoom(cluster.id), 30);\n              mapRef.current.setZoom(expansionZoom); //zoomar in om man klickar på en cluster\n\n              mapRef.current.panTo({\n                lat: latitude,\n                lng: longitude\n              }); //sätter zoom till rätt koordinat\n            },\n            children: pointCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 9\n          }, this)\n        }, cluster.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 7\n        }, this);\n      }\n\n      return /*#__PURE__*/_jsxDEV(Marker, {\n        lat: latitude,\n        lng: longitude,\n        children: /*#__PURE__*/_jsxDEV(BtnStyle, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              /*#__PURE__*/\n              _jsxDEV(\"div\", {\n                children: \"HEJ\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 9\n              }, this);\n            },\n            className: \"crime-marker\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"scooter\",\n              src: scooter,\n              alt: \"scooter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 6\n        }, this)\n      }, cluster.properties.crimeId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 5\n      }, this);\n    })\n  }, void 0, false);\n}\n\n_s(BikeMarker, \"1O27GWdYdoeJ9A25+Zoz0LOdaUc=\", false, function () {\n  return [useCurrentLocation, useSwr, useSuperCluster];\n});\n\n_c = BikeMarker;\n\nvar _c;\n\n$RefreshReg$(_c, \"BikeMarker\");","map":{"version":3,"sources":["C:/Users/Othor/dbwebb-kurser/frontendphp/webbclient/src/components/Map/BikeMarker.js"],"names":["React","useEffect","useState","useRef","GoogleMapReact","useCurrentLocation","useSuperCluster","Style","BtnStyle","scooter","useSwr","options","enableHighAccuracy","timeout","maximumAge","BikeMarker","markerState","location","err","console","log","zoom","mapRef","setZoom","bounds","setBounds","url","fetcher","fetch","then","response","json","Marker","children","data","error","crimes","points","map","crime","type","properties","cluster","crimeId","id","category","geometry","coordinates","parseFloat","longitude","latitude","clusters","supercluster","radius","maxZoom","isCluster","point_count","pointCount","width","length","height","expansionZoom","Math","min","getClusterExpansionZoom","current","panTo","lat","lng"],"mappings":"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","sourcesContent":["import {React, useEffect, useState, useRef } from \"react\";\n//googlemap\nimport GoogleMapReact from \"google-map-react\";\n//components\nimport useCurrentLocation from \"../../Hooks/currentPosition\";\nimport useSuperCluster from 'use-supercluster';\n//styles\nimport {Style, BtnStyle} from './Form.styles'\nimport scooter from '../../images/bike.png'\nimport useSwr from \"swr\";\nconst options = {\n\tenableHighAccuracy: true,\n\ttimeout: 1000 * 60 * 1, // 1 min\n\tmaximumAge: 1000 * 60 * 60, // 1 hour\n  };\n\n\n// style annorlunda jmf med komponenter. Se form.styles,  \nexport default function BikeMarker(markerState) {\n\tconst { location, err } = useCurrentLocation(options);\n\tconsole.log(location)\n  console.log(markerState.markerState.zoom)\n\tconst mapRef = useRef();\n\tconst [zoom, setZoom] = useState(markerState.markerState.zoom);\n\tconst [bounds, setBounds] = useState(markerState.markerState.bounds);\n\tconst url = \"https://data.police.uk/api/crimes-street/all-crime?lat=52.629729&lng=-1.131592&date=2020-01\"\n\n\tconst fetcher = (...args) => fetch(...args).then(response => response.json()); //gör om denna sen\n\tconst Marker = ({children}) => children;\n\n\tconst {data, error} = useSwr(url, fetcher) //gör om denna sen\n\tconst crimes = data && !error ? data : [];\n\n\t//clusters\n\tconst points = crimes.map(crime => ({\n\t\ttype: \"Feature\",\n\t\tproperties: {\n\t\t\tcluster: false,\n\t\t\tcrimeId: crime.id,\n\t\t\tcategory: crime.category\n\t\t},\n\t\tgeometry: {\n\t\t\ttype: \"Point\", \n\t\t\tcoordinates:[\n\t\t\t\tparseFloat(crime.location.longitude), \n\t\t\t\tparseFloat(crime.location.latitude)\n\t\t\t]}\n\t}))\n\n\tconst { clusters, supercluster } = useSuperCluster({\n\t\tpoints, \n\t\tbounds,\n\t\tzoom,\n\t\toptions: {radius:75, maxZoom:20}\n\t});\n\n  return (\n\t  <>\n\t\t\t{clusters.map(cluster => {\n\t\t\t\tconst[longitude, latitude] = cluster.geometry.coordinates;\n\t\t\t\tconst {cluster : isCluster, point_count: pointCount} = cluster.properties;\n\t\t\t\tif (isCluster) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Marker key={cluster.id} \n\t\t\t\t\t\t\tlat={latitude} \n\t\t\t\t\t\t\tlng={longitude}>\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tclassName=\"cluster-marker\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\twidth: `${10 + (pointCount/points.length)* 20}px`,\n\t\t\t\t\t\t\t\t\t\theight: `${10 + (pointCount/points.length)* 20}px`\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick= {() => {\n\t\t\t\t\t\t\t\t\t\tconst expansionZoom = Math.min(\n\t\t\t\t\t\t\t\t\t\t\tsupercluster.getClusterExpansionZoom(cluster.id),\n\t\t\t\t\t\t\t\t\t\t\t30\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tmapRef.current.setZoom(expansionZoom) //zoomar in om man klickar på en cluster\n\t\t\t\t\t\t\t\t\t\tmapRef.current.panTo({lat: latitude, lng: longitude});  //sätter zoom till rätt koordinat\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{pointCount}</div>\n\t\t\t\t\t\t</Marker>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t<Marker \n\t\t\t\t\tkey={cluster.properties.crimeId} \n\t\t\t\t\tlat={latitude} \n\t\t\t\t\tlng={longitude}>\n\t\t\t\t\t\t\n\t\t\t\t\t<BtnStyle>\n\t\t\t\t\t\t<button onClick= {() => {\n\t\t\t\t\t\t\t\t<div>HEJ</div>\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"crime-marker\">\n\t\t\t\t\t\t\t<img className = \"scooter\" src={scooter} alt=\"scooter\"/>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</BtnStyle>\n\t\t\t\t</Marker>\n\t\t\t\t)\n\t\t\t})}\n  </>\n\t);\n}"]},"metadata":{},"sourceType":"module"}