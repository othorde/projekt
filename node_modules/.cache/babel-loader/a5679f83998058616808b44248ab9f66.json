{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useContext,useState,useEffect}from\"react\";import{Link,Outlet,useNavigate}from\"react-router-dom\";//style\nimport{Container,Logga,Nav,SignOut,StyledMenu}from'./Form.styles.js';//components\nimport BurgerMenu from\"../BurgerMenu/index\";//import Menu from \"../Menu/index\"\nimport AppContext from\"../../AppContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(){var tag=localStorage.getItem(\"tag\");var _useState=useState(Boolean),_useState2=_slicedToArray(_useState,2),customer=_useState2[0],setCustomer=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),admin=_useState4[0],setAdmin=_useState4[1];//ändra till boolen sen\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var myContext=useContext(AppContext);var auth=myContext.auth;var navigate=useNavigate();/* Kollar om admin eller customer, sätter värdet i state */useEffect(function(){function checkWhoLoggedIn(){var tag=localStorage.getItem(\"tag\");setCustomer(true);if(tag==='\"admin\"'){setAdmin(true);setCustomer(false);}}checkWhoLoggedIn();},[tag]);/* Logga ut */var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:myContext.toggleAuth(false);myContext.setUserValues(null);localStorage.clear();navigate(\"/\");event.preventDefault();case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",auth&&/*#__PURE__*/_jsx(BurgerMenu,{open:open,setOpen:setOpen,children:\" \"}),/*#__PURE__*/_jsxs(StyledMenu,{open:open,children:[/*#__PURE__*/_jsx(Link,{to:\"/login/home\",children:\" Svenska Elsparkcyklar\"}),/*#__PURE__*/_jsx(Link,{to:\"/login/home\",children:\" Hem \"}),admin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin\",children:\" Admin \"}),/*#__PURE__*/_jsx(Link,{to:\"/account\",children:\" Hantera kunder \"})]}),customer&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/account\",children:\" Konto \"}),/*#__PURE__*/_jsx(Link,{to:\"/history\",children:\" Historik \"})]}),/*#__PURE__*/_jsx(Outlet,{})]}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Logga,{children:\" Svenska Elsparkcyklar \"}),auth&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Nav,{children:[/*#__PURE__*/_jsx(Link,{to:\"/login/home\",children:\" Hem \"}),admin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin\",children:\" Admin \"}),/*#__PURE__*/_jsx(Link,{to:\"/customers\",children:\" Hantera kunder \"})]}),customer&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/account\",children:\" Konto \"}),/*#__PURE__*/_jsx(Link,{to:\"/history\",children:\" Historik \"})]})]}),/*#__PURE__*/_jsx(Outlet,{}),\" \",/*#__PURE__*/_jsx(SignOut,{children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"logout\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Logga ut\"})})})]})]})]});};export default Header;","map":{"version":3,"sources":["C:/Users/Othor/dbwebb-kurser/frontendphp/webbclient/src/components/Header/index.js"],"names":["React","useContext","useState","useEffect","Link","Outlet","useNavigate","Container","Logga","Nav","SignOut","StyledMenu","BurgerMenu","AppContext","Header","tag","localStorage","getItem","Boolean","customer","setCustomer","admin","setAdmin","open","setOpen","myContext","auth","navigate","checkWhoLoggedIn","handleSubmit","event","toggleAuth","setUserValues","clear","preventDefault"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport { Link, Outlet, useNavigate  } from \"react-router-dom\";\n//style\nimport { Container, Logga, Nav, SignOut, StyledMenu } from './Form.styles.js';\n//components\nimport BurgerMenu from \"../BurgerMenu/index\";\n//import Menu from \"../Menu/index\"\nimport AppContext from \"../../AppContext\";\n\nconst Header = () => {\n    let tag = localStorage.getItem(\"tag\");\n\n    const [customer, setCustomer] = useState(Boolean);\n    const [admin, setAdmin] = useState(false); //ändra till boolen sen\n    const [open, setOpen] = useState(false);\n    const myContext = useContext(AppContext);\n    const auth = myContext.auth;\n    let navigate = useNavigate();\n\n    /* Kollar om admin eller customer, sätter värdet i state */\n    useEffect(() => {\n        function checkWhoLoggedIn(){\n            let tag = localStorage.getItem(\"tag\");\n            setCustomer(true);\n            if (tag === '\"admin\"') {\n\n                setAdmin(true);\n                setCustomer(false);\n            }\n        }\n        checkWhoLoggedIn()\n    }, [tag])\n\n    /* Logga ut */\n    const handleSubmit = async (event)  => {\n        myContext.toggleAuth(false);\n        myContext.setUserValues(null)\n        localStorage.clear();\n        navigate(\"/\");\n        event.preventDefault();\n    }\n    return (\n        <> {/* Burgermenu */}\n        {auth &&\n        <BurgerMenu open={open} setOpen={setOpen}> </BurgerMenu>\n        }\n            <StyledMenu open={open}>\n                <Link to=\"/login/home\" > Svenska Elsparkcyklar</Link> \n                <Link to=\"/login/home\" > Hem </Link> \n                {admin &&\n                <>\n                <Link to=\"/admin\" > Admin </Link> \n                <Link to=\"/account\" > Hantera kunder </Link>\n                </>\n                }\n                {customer &&\n                <>\n                <Link to=\"/account\" > Konto </Link>\n                <Link to=\"/history\" > Historik </Link>\n                </>\n            }\n            <Outlet/>\n        </StyledMenu>\n        {/* Menu */}\n        <Container>\n            <Logga> Svenska Elsparkcyklar </Logga>\n            {auth && (\n            <>\n                <Nav>\n                    <Link to=\"/login/home\" > Hem </Link> \n                    {admin &&\n                    <>\n                    <Link to=\"/admin\" > Admin </Link> \n                    <Link to=\"/customers\" > Hantera kunder </Link>\n                    </>\n                    }\n                    {customer &&\n                    <>\n                    <Link to=\"/account\" > Konto </Link>\n                    <Link to=\"/history\" > Historik </Link>\n                    </>\n                    }\n                </Nav>\n                <Outlet/> {/* outlet renderar child  */}\n            <SignOut>\n                <form onSubmit={handleSubmit} className = \"logout\">\n                    <input type=\"submit\" value=\"Logga ut\" />\n                </form>\n            </SignOut>\n            </>\n            )}\n        </Container>\n        </>\n    )\n}\n\nexport default Header\n\n"]},"metadata":{},"sourceType":"module"}