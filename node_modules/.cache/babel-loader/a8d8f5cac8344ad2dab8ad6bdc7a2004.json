{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\src\\\\routes\\\\LandingPage\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\"; // components\n\nimport Loader from '../../components/Loader'; // style\n\nimport { Wrapper } from \"./Form.styles\"; //other\n\nimport AppContext from \"../../AppContext\";\nimport Api from \"../../Api\";\nimport { PROXY_URL, defaultConfigAuthenticate } from '../../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nrequire('dotenv').config();\n/* Hämtar ut url koden av github, som redirectar hit. Skickar sedan koden till backend\n   så att den kan göra de request som behövs till github. \n   Får sedan tillbaka användaruppg, som används för att logga in användaren\n   genom vårt api.\n*/\n\n\nexport default function LandingPage() {\n  _s();\n\n  const [loggedInUser, setLoggedInUser] = useState(Boolean);\n  const navigate = useNavigate();\n  const myContext = useContext(AppContext);\n  useEffect(() => {\n    // Hämtar url från webbläsare\n    const url = window.location.href;\n    const hasCode = url.includes(\"?code=\"); // Om github skickar tillbaka kod, ta ut koden ur URL strängen\n\n    if (hasCode) {\n      const newUrl = url.split(\"?code=\");\n      window.history.pushState({}, null, newUrl[0]);\n      const requestData = {\n        code: newUrl[1]\n      };\n      getGitInfo(requestData);\n    }\n  }, []);\n  /* När loggedInUser eller set ändras navigera till home\n     om tag är satt och loggedInUser är true */\n\n  useEffect(() => {\n    let tag = localStorage.getItem(\"tag\");\n    loggedInUser === true && tag && navigate(\"/login/home\");\n  }, [loggedInUser, setLoggedInUser]);\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: !loggedInUser === \"Not OK\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Det gick inte att logga in just nu\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 3\n    }, this) : /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 10\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LandingPage, \"wUqvUK37ZuzBwWQzbG3ZOQ+Tb70=\", false, function () {\n  return [useNavigate];\n});\n\n_c = LandingPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LandingPage\");","map":{"version":3,"sources":["C:/Users/Othor/dbwebb-kurser/frontendphp/webbclient/src/routes/LandingPage/index.js"],"names":["React","useState","useEffect","useContext","useNavigate","Loader","Wrapper","AppContext","Api","PROXY_URL","defaultConfigAuthenticate","require","config","LandingPage","loggedInUser","setLoggedInUser","Boolean","navigate","myContext","url","window","location","href","hasCode","includes","newUrl","split","history","pushState","requestData","code","getGitInfo","tag","localStorage","getItem"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,WAAT,QAA4B,kBAA5B,C,CACA;;AACA,OAAOC,MAAP,MAAmB,yBAAnB,C,CACA;;AACA,SAAQC,OAAR,QAAsB,eAAtB,C,CACA;;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,SAAQC,SAAR,EAAmBC,yBAAnB,QAAmD,cAAnD;;;AAEAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;AAEA;AACA;AACA;AACA;AACA;;;AACA,eAAe,SAASC,WAAT,GAAuB;AAAA;;AACrC,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCd,QAAQ,CAACe,OAAD,CAAhD;AACA,QAAMC,QAAQ,GAAGb,WAAW,EAA5B;AACA,QAAMc,SAAS,GAAGf,UAAU,CAACI,UAAD,CAA5B;AAEAL,EAAAA,SAAS,CAAC,MAAM;AACf;AACA,UAAMiB,GAAG,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAA5B;AACA,UAAMC,OAAO,GAAGJ,GAAG,CAACK,QAAJ,CAAa,QAAb,CAAhB,CAHe,CAKf;;AACA,QAAID,OAAJ,EAAa;AACb,YAAME,MAAM,GAAGN,GAAG,CAACO,KAAJ,CAAU,QAAV,CAAf;AACAN,MAAAA,MAAM,CAACO,OAAP,CAAeC,SAAf,CAAyB,EAAzB,EAA6B,IAA7B,EAAmCH,MAAM,CAAC,CAAD,CAAzC;AAEA,YAAMI,WAAW,GAAG;AACnBC,QAAAA,IAAI,EAAEL,MAAM,CAAC,CAAD;AADO,OAApB;AAGAM,MAAAA,UAAU,CAACF,WAAD,CAAV;AACC;AACD,GAfQ,EAeN,EAfM,CAAT;AAoBA;AACD;;AACC3B,EAAAA,SAAS,CAAC,MAAM;AACf,QAAI8B,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAV;AACCpB,IAAAA,YAAY,KAAK,IAAjB,IAAyBkB,GAA1B,IAAkCf,QAAQ,CAAC,aAAD,CAA1C;AACA,GAHQ,EAGN,CAACH,YAAD,EAAeC,eAAf,CAHM,CAAT;AAMC,sBACE,QAAC,OAAD;AAAA,cACD,CAACD,YAAD,KAAkB,QAAlB,gBACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADC,gBAGM,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAJL;AAAA;AAAA;AAAA;AAAA,UADF;AASD;;GA1CuBD,W;UAENT,W;;;KAFMS,W","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n// components\nimport Loader from '../../components/Loader'\n// style\nimport {Wrapper} from \"./Form.styles\";\n//other\nimport AppContext from \"../../AppContext\";\nimport Api from \"../../Api\";\nimport {PROXY_URL, defaultConfigAuthenticate} from '../../config'\n\nrequire('dotenv').config()\n\n/* Hämtar ut url koden av github, som redirectar hit. Skickar sedan koden till backend\n   så att den kan göra de request som behövs till github. \n   Får sedan tillbaka användaruppg, som används för att logga in användaren\n   genom vårt api.\n*/\nexport default function LandingPage() {\n\tconst [loggedInUser, setLoggedInUser] = useState(Boolean);\n\tconst navigate = useNavigate();\n\tconst myContext = useContext(AppContext);        \n\n\tuseEffect(() => {\n\t\t// Hämtar url från webbläsare\n\t\tconst url = window.location.href;\n\t\tconst hasCode = url.includes(\"?code=\");\n\t\t\n\t\t// Om github skickar tillbaka kod, ta ut koden ur URL strängen\n\t\tif (hasCode) {\n\t\tconst newUrl = url.split(\"?code=\");\n\t\twindow.history.pushState({}, null, newUrl[0]);\n\n\t\tconst requestData = {\n\t\t\tcode: newUrl[1]\n\t\t};\n\t\tgetGitInfo(requestData);\n\t\t}\n\t}, []);\n\n\n\t\n\n\t/* När loggedInUser eller set ändras navigera till home\n\t   om tag är satt och loggedInUser är true */\n\tuseEffect(() => {\n\t\tlet tag = localStorage.getItem(\"tag\");\n\t\t(loggedInUser === true && tag) && navigate(\"/login/home\")\n\t}, [loggedInUser, setLoggedInUser])\n\n\n  return (\n    <Wrapper>\n\t\t{!loggedInUser === \"Not OK\" ? \n\t\t<p>Det gick inte att logga in just nu</p> \n\t\t: (\n        \t<Loader></Loader>\n\t\t)}\n    </Wrapper>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}