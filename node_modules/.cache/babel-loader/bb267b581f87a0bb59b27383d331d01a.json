{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{React,useEffect,useState,useRef}from\"react\";//googlemap\nimport GoogleMapReact from\"google-map-react\";//hooks\nimport useCurrentLocation from\"../../Hooks/useCurrentPosition\";import useDisplayPolyChargeStation from\"../../Hooks/useDisplayPolyChargeStation\";import useDisplayPolyParkZone from\"../../Hooks/useDisplayPolyParkZone\";import useDisplayPolyCities from\"../../Hooks/useDisplayPolyCities\";//components\nimport PopUp from\"../PopUp\";import Logg from\"../Logg\";import Loader from\"../Loader\";//styles & img\nimport{Container,StyleMap,Main}from'./Form.styles';import bikeimg from'../../images/bike.png';import personimg from'../../images/person.png';import fullyChargedBike from'../../images/fullyChargedBike.png';import halfChargedBike from'../../images/halfchargedbike.png';import noChargeBike from'../../images/noChargeBike.png';// options till userLocation\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var options={enableHighAccuracy:true,timeout:1000*60*1,// 1 min\nmaximumAge:1000*60*60// 1 hour\n};/* Denna komponent är kartan till admin.\n   Populerar kartan genom att hämta från api. Scootrar hämtas direkt\n   från props(Admin route). För att kunna lägga till polygons hämtas dessa med \n   Hooks, se mappen hooks.\n*/export default function MapContainer(props){console.log(props);//hooks\nvar mapRef=useRef();var _useDisplayPolyCharge=useDisplayPolyChargeStation(mapRef,props),loadStationContent=_useDisplayPolyCharge.loadStationContent;var _useDisplayPolyCities=useDisplayPolyCities(mapRef,props),cityContent=_useDisplayPolyCities.cityContent;var _useDisplayPolyParkZo=useDisplayPolyParkZone(mapRef,props),parkingZoneContent=_useDisplayPolyParkZo.parkingZoneContent;var _useCurrentLocation=useCurrentLocation(options),location=_useCurrentLocation.location;//State\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),scooter=_useState2[0],setScooter=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),PopupInfo=_useState4[0],setPopupInfo=_useState4[1];///Variabel\nvar loadScooters=props.ifToShowScooter;var ScooterArray=props.ifToShowScooter.content;// Marker på kartan 1 person\nvar Marker=function Marker(_ref){var children=_ref.children;return/*#__PURE__*/_jsx(\"div\",{children:children});};/*  Dessa useEffect sätter de andra värdet så att rätt info visas i rutan för innehåll (PopUp)\n\t\tBeroende på vad användaren vill se.\n\t*/useEffect(function(){scooter.showScooter&&setPopupInfo({content:scooter.scooter,whatToShow:\"Scooter\"});},[scooter.showScooter,scooter,setScooter]);useEffect(function(){loadStationContent.showLoadStations&&setPopupInfo({content:loadStationContent.loadStations,whatToShow:\"LoadStation\"});},[loadStationContent.showLoadStations,loadStationContent.loadStations]);useEffect(function(){cityContent.showLoadCitys&&setPopupInfo({content:cityContent.city,whatToShow:\"City\"});},[cityContent.showLoadCitys,cityContent.city]);useEffect(function(){parkingZoneContent.showParkingZone&&setPopupInfo({content:parkingZoneContent.loadParkingZone,whatToShow:\"ParkingZone\"});},[parkingZoneContent.showParkingZone,parkingZoneContent.loadParkingZone]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Main,{children:[/*#__PURE__*/_jsx(StyleMap,{children:location?/*#__PURE__*/_jsxs(GoogleMapReact,{bootstrapURLKeys:{key:process.env.REACT_APP_GOOGLE_MAPS_API_KEY},defaultCenter:{lat:location.latitude,lng:location.longitude},defaultZoom:10,yesIWantToUseGoogleMapApiInternals:true,onGoogleApiLoaded:function onGoogleApiLoaded(_ref2){var map=_ref2.map,maps=_ref2.maps;mapRef.current={map:map,maps:maps};},children:[/*#__PURE__*/_jsx(Marker,{lat:location.latitude,lng:location.longitude,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"crime-marker\",src:personimg,alt:\"person\"})})},1),loadScooters.loadScooters&&ScooterArray.map(function(scooter){return/*#__PURE__*/_jsx(Marker,{lat:scooter.position.lat,lng:scooter.position.lng,children:/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setScooter({scooter:scooter,showScooter:true});},className:\"crime-marker\",children:scooter.battery<99?/*#__PURE__*/_jsx(\"img\",{className:\"scooter\",src:halfChargedBike,alt:\"scooter\"}):scooter.battery<=96?/*#__PURE__*/_jsx(\"img\",{className:\"scooter\",src:noChargeBike,alt:\"scooter\"}):/*#__PURE__*/_jsx(\"img\",{className:\"scooter\",src:fullyChargedBike,alt:\"scooter\"})})},scooter._id);})]}):/*#__PURE__*/_jsx(Loader,{})}),scooter||cityContent||loadStationContent?/*#__PURE__*/_jsx(PopUp,{PopupInfo:PopupInfo},\"popupkey\"):null]}),/*#__PURE__*/_jsx(Logg,{scooter:scooter})]});}","map":{"version":3,"sources":["C:/Users/Othor/dbwebb-kurser/frontendphp/webbclient/src/components/Map/index.js"],"names":["React","useEffect","useState","useRef","GoogleMapReact","useCurrentLocation","useDisplayPolyChargeStation","useDisplayPolyParkZone","useDisplayPolyCities","PopUp","Logg","Loader","Container","StyleMap","Main","bikeimg","personimg","fullyChargedBike","halfChargedBike","noChargeBike","options","enableHighAccuracy","timeout","maximumAge","MapContainer","props","console","log","mapRef","loadStationContent","cityContent","parkingZoneContent","location","scooter","setScooter","PopupInfo","setPopupInfo","loadScooters","ifToShowScooter","ScooterArray","content","Marker","children","showScooter","whatToShow","showLoadStations","loadStations","showLoadCitys","city","showParkingZone","loadParkingZone","key","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","lat","latitude","lng","longitude","map","maps","current","position","battery","_id"],"mappings":"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","sourcesContent":["import {React, useEffect, useState, useRef } from \"react\";\n//googlemap\nimport GoogleMapReact from \"google-map-react\";\n//hooks\nimport useCurrentLocation from \"../../Hooks/useCurrentPosition\";\nimport useDisplayPolyChargeStation from \"../../Hooks/useDisplayPolyChargeStation\";\nimport useDisplayPolyParkZone from \"../../Hooks/useDisplayPolyParkZone\";\nimport useDisplayPolyCities from \"../../Hooks/useDisplayPolyCities\";\n//components\nimport PopUp from \"../PopUp\";\nimport Logg from \"../Logg\";\nimport Loader from \"../Loader\"\n//styles & img\nimport {Container,StyleMap, Main} from './Form.styles'\nimport bikeimg from '../../images/bike.png'\nimport personimg from '../../images/person.png'\nimport fullyChargedBike from '../../images/fullyChargedBike.png';\nimport halfChargedBike from '../../images/halfchargedbike.png';\nimport noChargeBike from '../../images/noChargeBike.png';\n\n// options till userLocation\nconst options = {\n\tenableHighAccuracy: true,\n\ttimeout: 1000 * 60 * 1, // 1 min\n\tmaximumAge: 1000 * 60 * 60, // 1 hour\n};\n\n/* Denna komponent är kartan till admin.\n   Populerar kartan genom att hämta från api. Scootrar hämtas direkt\n   från props(Admin route). För att kunna lägga till polygons hämtas dessa med \n   Hooks, se mappen hooks.\n*/\nexport default function MapContainer(props) {\n\tconsole.log(props)\n\t//hooks\n\tconst mapRef = useRef();\n\tconst { loadStationContent } = useDisplayPolyChargeStation(mapRef, props);\n\tconst { cityContent } = useDisplayPolyCities(mapRef, props);\n\tconst { parkingZoneContent } = useDisplayPolyParkZone(mapRef, props);\n\tconst { location } = useCurrentLocation(options);\n\t//State\n\tconst [scooter, setScooter] = useState([]);\n\tconst [PopupInfo, setPopupInfo] = useState(null);\n\t///Variabel\n\tconst loadScooters = props.ifToShowScooter;\n\tconst ScooterArray = props.ifToShowScooter.content;\n\t// Marker på kartan 1 person\n\tconst Marker = ({ children }) => <div>{children}</div>;\n\n\t/*  Dessa useEffect sätter de andra värdet så att rätt info visas i rutan för innehåll (PopUp)\n\t\tBeroende på vad användaren vill se.\n\t*/ \n\tuseEffect(() => {\n\t\tscooter.showScooter && setPopupInfo({content: scooter.scooter, whatToShow: \"Scooter\"});\n\t},[scooter.showScooter, scooter, setScooter])\n\n\tuseEffect(() => {\n\t\tloadStationContent.showLoadStations && setPopupInfo({content: loadStationContent.loadStations, whatToShow: \"LoadStation\"});\n\t},[loadStationContent.showLoadStations, loadStationContent.loadStations])\n\n\tuseEffect(() => {\n\t\tcityContent.showLoadCitys && setPopupInfo({content: cityContent.city, whatToShow: \"City\"});\n\t},[cityContent.showLoadCitys, cityContent.city])\n\n\tuseEffect(() => {\n\t\tparkingZoneContent.showParkingZone && setPopupInfo({content: parkingZoneContent.loadParkingZone, whatToShow: \"ParkingZone\"});\n\t},[parkingZoneContent.showParkingZone, parkingZoneContent.loadParkingZone])\n\n\treturn (\n\t\t<Container>\n\t\t\t<Main> \n\t\t\t<StyleMap>\n\t\t\t\t{/* Visar karta */}\n\t\t\t\t{location ? (\n\t\t\t\t<GoogleMapReact \n\t\t\t\t\tbootstrapURLKeys={{key: process.env.REACT_APP_GOOGLE_MAPS_API_KEY}}\n\t\t\t\t\tdefaultCenter={{ lat: location.latitude, lng: location.longitude}}\n\t\t\t\t\tdefaultZoom={10}\n\t\t\t\t\tyesIWantToUseGoogleMapApiInternals\n\t\t\t\t\tonGoogleApiLoaded= {({map, maps}) => {\n\t\t\t\t\t\tmapRef.current = {map, maps};\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{/*Visar användaren på kartan */}\n\t\t\t\t\t<Marker \n\t\t\t\t\t\tkey={1} \n\t\t\t\t\t\tlat={location.latitude} \n\t\t\t\t\t\tlng={location.longitude}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t<img className = \"crime-marker\" src={personimg} alt=\"person\" />\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t</Marker>\n\n\t\t\t\t\t{/*Visar alla scootrar*/}\n\t\t\t\t\t{loadScooters.loadScooters && (\n\t\t\t\t\tScooterArray.map(scooter => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t<Marker \n\t\t\t\t\t\t\tkey={scooter._id} \n\t\t\t\t\t\t\tlat={scooter.position.lat} \n\t\t\t\t\t\t\tlng={scooter.position.lng}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div onClick={() => setScooter({scooter, showScooter: true})}className=\"crime-marker\">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{ scooter.battery < 99  ? <img className = \"scooter\" src={halfChargedBike} alt=\"scooter\"/>\n\t\t\t\t\t\t\t: scooter.battery <= 96  ? <img className = \"scooter\" src={noChargeBike} alt=\"scooter\"/>\n\t\t\t\t\t\t\t: <img className = \"scooter\" src={fullyChargedBike} alt=\"scooter\"/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Marker>)\n\t\t\t\t\t\t})\n\t\t\t\t\t)}\n\t\t\t\t</GoogleMapReact>\n\t\t\t\t):(<Loader/> )}\n\t\t\t</StyleMap>\n\n\t\t\t{/*Visar POPUP fönster, info skickas hit beroende på vad användaren vill se*/}\n\t\t\t{scooter || cityContent || loadStationContent ? (\n\t\t\t\t<PopUp key={\"popupkey\"} PopupInfo={PopupInfo}></PopUp>\n\t\t\t): (null) }\n\t\t\t</Main>\n\t\t\t<Logg scooter= {scooter}/>\t\n\t\t</Container>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}