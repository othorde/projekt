{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\src\\\\components\\\\Oauth\\\\index.js\";\nimport React, { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { RequestAuthorizationCode } from \"react-oauth2-auth-code-flow\";\nimport ClientOAuth2 from \"client-oauth2\";\nimport { AuthorizationCodeCallback } from \"react-oauth2-auth-code-flow\"; //styles\n\nimport { Wrapper, Content, SignIn, Delimiter, ScooterImg } from './Form.styles.js';\nimport scooterPic from '../../images/scooter.png'; //other\n\nimport AppContext from '../../AppContext';\nimport Api from \"../../api.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nrequire('dotenv').config();\n\nconst oauthClient = new ClientOAuth2({\n  clientId: process.env.GITHUB_CLIENT_ID,\n  clientSecret: process.env.GITHUB_CLIENT_SECRET,\n  accessTokenUri: `https://github.com/login/oauth/access_token`,\n\n  /* måste va rätt */\n  authorizationUri: \"https://github.com/login/oauth/authorize\",\n\n  /* måste ocksåva rätt */\n  redirectUri: \"http://localhost:3000/login/home\",\n  scopes: [\"identity\"]\n});\n\nconst Oauth = () => {\n  console.log(\"HEJ\");\n\n  const handleSubmit2 = async event => {\n    // kontrollera inlogg, kolla med servern om användaruppg är ok\n    // nu sparar jag lösen som vnaligt lösen, fixa\n    let res = oauthClient;\n    console.log(res); // localStorage.setItem('user', JSON.stringify(inputs));\n    // myContext.toggleAuth(true);\n    // navigate(\"/home\")\n\n    event.preventDefault();\n  };\n\n  handleSuccess = async (accessToken, _ref) => {\n    let {\n      response,\n      state\n    } = _ref;\n    console.log(\"Successfully authorized\");\n    await setProfileFromDropbox(accessToken);\n    await redirect(state.from);\n  };\n\n  handleError = error => {\n    console.error(\"An error occurred\");\n    console.error(error.message);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: /*#__PURE__*/_jsxDEV(AuthorizationCodeCallback, {\n      oauthClient: oauthClient,\n      onAuthSuccess: handleSuccess(),\n      onAuthError: handleError(),\n      render: _ref2 => {\n        let {\n          processing,\n          state,\n          error\n        } = _ref2;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [processing && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Authorizing now...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 32\n          }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error\",\n            children: [\"An error occurred: \", error.message]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n};\n\n_c = Oauth;\nexport default Oauth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Oauth\");","map":{"version":3,"sources":["C:/Users/Othor/dbwebb-kurser/frontendphp/webbclient/src/components/Oauth/index.js"],"names":["React","useState","useContext","useNavigate","RequestAuthorizationCode","ClientOAuth2","AuthorizationCodeCallback","Wrapper","Content","SignIn","Delimiter","ScooterImg","scooterPic","AppContext","Api","require","config","oauthClient","clientId","process","env","GITHUB_CLIENT_ID","clientSecret","GITHUB_CLIENT_SECRET","accessTokenUri","authorizationUri","redirectUri","scopes","Oauth","console","log","handleSubmit2","event","res","preventDefault","handleSuccess","accessToken","response","state","setProfileFromDropbox","redirect","from","handleError","error","message","processing"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,UAAzB,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,wBAAT,QAAyC,6BAAzC;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,SAASC,yBAAT,QAA2C,6BAA3C,C,CAEA;;AACA,SAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmCC,SAAnC,EAA8CC,UAA9C,QAAgE,kBAAhE;AACA,OAAOC,UAAP,MAAuB,0BAAvB,C,CAEA;;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,GAAP,MAAgB,cAAhB;;;AACAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAGA,MAAMC,WAAW,GAAG,IAAIZ,YAAJ,CAAiB;AACjCa,EAAAA,QAAQ,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADW;AAEjCC,EAAAA,YAAY,EAAEH,OAAO,CAACC,GAAR,CAAYG,oBAFO;AAGjCC,EAAAA,cAAc,EAAG,6CAHgB;;AAG8B;AAC/DC,EAAAA,gBAAgB,EAAE,0CAJe;;AAI6B;AAC9DC,EAAAA,WAAW,EAAE,kCALoB;AAMjCC,EAAAA,MAAM,EAAE,CAAC,UAAD;AANyB,CAAjB,CAApB;;AAUA,MAAMC,KAAK,GAAG,MAAM;AAChBC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;;AAIA,QAAMC,aAAa,GAAG,MAAOC,KAAP,IAAkB;AACpC;AACA;AAGA,QAAIC,GAAG,GAAGhB,WAAV;AACAY,IAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ,EANoC,CAOpC;AACA;AACA;;AACAD,IAAAA,KAAK,CAACE,cAAN;AACH,GAXD;;AAeAC,EAAAA,aAAa,GAAG,OAAOC,WAAP,WAA4C;AAAA,QAAxB;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAwB;AACtDT,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACA,UAAMS,qBAAqB,CAACH,WAAD,CAA3B;AACA,UAAMI,QAAQ,CAACF,KAAK,CAACG,IAAP,CAAd;AACD,GAJL;;AAMAC,EAAAA,WAAW,GAAIC,KAAD,IAAW;AACnBd,IAAAA,OAAO,CAACc,KAAR,CAAc,mBAAd;AACAd,IAAAA,OAAO,CAACc,KAAR,CAAcA,KAAK,CAACC,OAApB;AACD,GAHL;;AAKA,sBACI,QAAC,OAAD;AAAA,2BACA,QAAC,yBAAD;AACI,MAAA,WAAW,EAAE3B,WADjB;AAEI,MAAA,aAAa,EAAEkB,aAAa,EAFhC;AAGI,MAAA,WAAW,EAAEO,WAAW,EAH5B;AAII,MAAA,MAAM,EAAE;AAAA,YAAC;AAAEG,UAAAA,UAAF;AAAcP,UAAAA,KAAd;AAAqBK,UAAAA;AAArB,SAAD;AAAA,4BACJ;AAAA,qBACCE,UAAU,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADf,EAECF,KAAK,iBACF;AAAG,YAAA,SAAS,EAAC,OAAb;AAAA,8CAAyCA,KAAK,CAACC,OAA/C;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADI;AAAA;AAJZ;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,UADJ;AAiBH,CAhDD;;KAAMhB,K;AAkDN,eAAeA,KAAf","sourcesContent":["import React, {useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { RequestAuthorizationCode } from \"react-oauth2-auth-code-flow\";\nimport ClientOAuth2 from \"client-oauth2\";\nimport { AuthorizationCodeCallback  } from \"react-oauth2-auth-code-flow\";\n\n//styles\nimport { Wrapper, Content, SignIn, Delimiter, ScooterImg } from './Form.styles.js'\nimport scooterPic from '../../images/scooter.png'\n\n//other\nimport AppContext from '../../AppContext';\nimport Api from \"../../api.js\";\nrequire('dotenv').config()\n\n\nconst oauthClient = new ClientOAuth2({\n    clientId: process.env.GITHUB_CLIENT_ID,\n    clientSecret: process.env.GITHUB_CLIENT_SECRET,\n    accessTokenUri: `https://github.com/login/oauth/access_token`, /* måste va rätt */\n    authorizationUri: \"https://github.com/login/oauth/authorize\", /* måste ocksåva rätt */\n    redirectUri: \"http://localhost:3000/login/home\",\n    scopes: [\"identity\"],\n});\n\n\nconst Oauth = () => {\n    console.log(\"HEJ\")\n\n\n  \n    const handleSubmit2 = async (event)  => {\n        // kontrollera inlogg, kolla med servern om användaruppg är ok\n        // nu sparar jag lösen som vnaligt lösen, fixa\n        \n\n        let res = oauthClient;\n        console.log(res)\n        // localStorage.setItem('user', JSON.stringify(inputs));\n        // myContext.toggleAuth(true);\n        // navigate(\"/home\")\n        event.preventDefault();\n    }\n\n\n    \n    handleSuccess = async (accessToken, { response, state }) => {\n          console.log(\"Successfully authorized\");\n          await setProfileFromDropbox(accessToken);\n          await redirect(state.from);\n        };\n      \n    handleError = (error) => {\n          console.error(\"An error occurred\");\n          console.error(error.message);\n        };\n\n    return (\n        <Wrapper>\n        <AuthorizationCodeCallback\n            oauthClient={oauthClient}\n            onAuthSuccess={handleSuccess()}\n            onAuthError={handleError()}\n            render={({ processing, state, error }) => (\n                <div>\n                {processing && <p>Authorizing now...</p>}\n                {error && (\n                    <p className=\"error\">An error occurred: {error.message}</p>\n                )}\n                </div>\n            )}\n        />\n        </Wrapper>\n      );\n}\n\nexport default Oauth\n"]},"metadata":{},"sourceType":"module"}