{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\src\\\\components\\\\MoveBike\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState } from \"react\";\nimport Api from \"../../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MoveBike(props) {\n  _s();\n\n  const [charging_posts, setCharging_posts] = useState([]);\n  const [moveBikeToColor, setMoveBikeToColor] = useState({});\n  /* funktionen hämtar den stad där cykeln befinner sig \n     loopar igenom och sparar position och färgkod för laddningsstationen \n     Kontrollera denna när vi har fler laddningsstationer\n     Bör va graphQl sen\n     */\n\n  async function getLoadStationsForMovingBike() {\n    let city = await Api.getACity(props.city);\n    city[0].charging_posts.map(elem => {\n      setCharging_posts([elem]);\n    });\n  } // Vad behöver uppdateras?\n  // Scooterns plats ny long lat\n  // Uppdatera hur många som finns i föregående zon\n  // uppdatera hur många som finns i den nya zonen\n\n  /* Får vilken färgkod som scootern ska skickas till\n      kontrollerar med färger för staden\n      räknar ut nya koordinater. random plats inom zonen.\n      Uppdaterar, antal cyklar i nuvarande zon samt ny zon\n  */\n\n\n  const handleSubmit = () => {\n    if (moveBikeToColor !== null) {\n      console.log(moveBikeToColor);\n      let bikeId = props.id;\n      console.log(props);\n      let position;\n      charging_posts.filter(elem => elem.color.includes(moveBikeToColor) ? position = elem.position : position = null);\n\n      if (position !== null) {\n        var lat = position.polygonePart1.lat + Math.random() * (position.polygonePart4.lat - position.polygonePart1.lat); // lat = y\n\n        var lng = position.polygonePart1.lng + Math.random() * (position.polygonePart4.lng - position.polygonePart1.lng); //lng = x\n\n        newPosition = {\n          lat: lat,\n          lng: lng\n        };\n        Api.updateAScooter(bikeId, newPosition, movedBy, battery, speed, logg); // var lat = y_min + (Math.random() * (y_max - y_min)); // lat = y\n        // var lng = x_min + (Math.random() * (x_max - x_min)); //lng = x\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: getLoadStationsForMovingBike,\n    children: [\" \", /*#__PURE__*/_jsxDEV(\"select\", {\n      \"data-testid\": \"dropdown\",\n      onChange: e => {\n        setMoveBikeToColor(e.target.value);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: 'noValue',\n        children: \"-- V\\xE4lj vart cykeln ska f\\xF6rflyttas --\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), charging_posts.map(elem => elem !== null && /*#__PURE__*/_jsxDEV(\"option\", {\n        value: elem.color,\n        children: elem.color + \" zon\"\n      }, elem.color, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        children: \" F\\xF6rflytta cykel \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 19\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MoveBike, \"v3F1t0iaCax8Kg9kUJmPztAKqSs=\");\n\n_c = MoveBike;\n\nvar _c;\n\n$RefreshReg$(_c, \"MoveBike\");","map":{"version":3,"sources":["C:/Users/Othor/dbwebb-kurser/frontendphp/webbclient/src/components/MoveBike/index.js"],"names":["React","useState","Api","MoveBike","props","charging_posts","setCharging_posts","moveBikeToColor","setMoveBikeToColor","getLoadStationsForMovingBike","city","getACity","map","elem","handleSubmit","console","log","bikeId","id","position","filter","color","includes","lat","polygonePart1","Math","random","polygonePart4","lng","newPosition","updateAScooter","movedBy","battery","speed","logg","e","target","value"],"mappings":"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","sourcesContent":["import {React, useState} from \"react\";\nimport Api from \"../../api\";\nexport default function MoveBike(props) {\n\n    const [charging_posts, setCharging_posts] = useState([])\n    const [moveBikeToColor, setMoveBikeToColor] = useState({})\n\n\n    /* funktionen hämtar den stad där cykeln befinner sig \n       loopar igenom och sparar position och färgkod för laddningsstationen \n       Kontrollera denna när vi har fler laddningsstationer\n       Bör va graphQl sen\n       */\n    async function getLoadStationsForMovingBike() {\n        let city = await Api.getACity(props.city);\n        city[0].charging_posts.map(elem => {\n            setCharging_posts([elem])\n        })\n    }\n\n    // Vad behöver uppdateras?\n    // Scooterns plats ny long lat\n    // Uppdatera hur många som finns i föregående zon\n    // uppdatera hur många som finns i den nya zonen\n    /* Får vilken färgkod som scootern ska skickas till\n        kontrollerar med färger för staden\n        räknar ut nya koordinater. random plats inom zonen.\n        Uppdaterar, antal cyklar i nuvarande zon samt ny zon\n    */\n    const handleSubmit = () => {\n\n        if (moveBikeToColor !== null) {\n            console.log((moveBikeToColor))\n            let bikeId = props.id;\n            console.log(props)\n            let position;\n            \n            charging_posts.filter(elem=> elem.color.includes(moveBikeToColor) ? position = elem.position : position = null)\n            if ( position !== null) {\n            var lat = position.polygonePart1.lat + (Math.random() * (position.polygonePart4.lat - position.polygonePart1.lat)); // lat = y\n            var lng = position.polygonePart1.lng + (Math.random() * (position.polygonePart4.lng - position.polygonePart1.lng)); //lng = x\n            newPosition = {lat: lat, lng: lng}\n            \n\n            Api.updateAScooter(bikeId, newPosition, movedBy, battery, speed, logg)\n            \n            // var lat = y_min + (Math.random() * (y_max - y_min)); // lat = y\n            // var lng = x_min + (Math.random() * (x_max - x_min)); //lng = x\n\n\n            }\n        }\n    }\n\n\treturn (\n        <div onClick = {getLoadStationsForMovingBike}> {/* laddar in ny info med onClick */}\n            <select \n                data-testid=\"dropdown\" onChange={(e) => {\n                setMoveBikeToColor((e.target.value))\n            }}>\n                <option value={'noValue'}>-- Välj vart cykeln ska förflyttas --</option>\n                {charging_posts.map(elem => elem !== null  &&\n                    <option key={elem.color}value={elem.color}>\n                    {elem.color + \" zon\"}\n                    </option> )}\n            </select>\n            <div> <button onClick={handleSubmit}> Förflytta cykel </button> </div>\n        </div>\n\t);\n}\n\n\n"]},"metadata":{},"sourceType":"module"}