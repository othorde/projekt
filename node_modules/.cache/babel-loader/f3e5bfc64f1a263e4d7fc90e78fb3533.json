{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Othor\\\\dbwebb-kurser\\\\frontendphp\\\\webbclient\\\\src\\\\components\\\\Payment\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState, useContext } from \"react\"; //components\n\nimport User from \"../../components/User/index.js\";\nimport Api from \"../../api.js\";\nimport AppContext from \"../../AppContext.js\"; //styles\n\nimport { Content, Delimiter, StylePayment, StylePayment2 } from \"./Form.styles.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialValue = {\n  showMsgSubs: false,\n  showMsgOnePay: false,\n  msg: \"\"\n};\n\nconst Payment = () => {\n  _s();\n\n  const myContext = useContext(AppContext);\n  const [inputs, setInputs] = useState({});\n  const [msgForUser, setMsgForUser] = useState(initialValue);\n  let userName = myContext.user.username;\n\n  const handleChange = event => {\n    const name = event.target.name;\n    const value = event.target.value;\n    setInputs(values => ({ ...values,\n      [name]: value\n    }));\n  };\n\n  const handleOnePayment = async event => {\n    if (inputs && inputs.onepayment > 0) {\n      const res = await Api.updateUserFunds(inputs.onepayment, userName);\n      setInputs(null);\n\n      if (res == \"OK\") {\n        setMsgForUser(\"Din insättning har gått igenom och dina pengar bör nu synas på ditt konto \");\n        return;\n      }\n\n      setMsgForUser(\"Något gick fel.. testa igen \");\n    }\n\n    event.preventDefault();\n  }; // KOLLA vad meddelandena blir här från backend\n\n\n  const handleSubscription = async event => {\n    if (inputs && inputs.subscription > 0) {\n      const res = await Api.updateUserSubsc(inputs.subscription, userName);\n      setInputs(null);\n\n      if (res == \"OK\") {\n        setMsgForUser(\"Din prenumeration är nu godkänd\");\n        return;\n      }\n\n      setMsgForUser(\"Något gick fel.. testa igen \");\n    }\n\n    event.preventDefault();\n  };\n\n  useEffect(() => {}, [setMsgForUser, msgForUser]);\n  return /*#__PURE__*/_jsxDEV(Content, {\n    children: [/*#__PURE__*/_jsxDEV(StylePayment, {\n      children: [msgForUser.showMsgOnePay ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: msgForUser.msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 41\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \" Minsta m\\xF6jliga ins\\xE4ttning (100:-) \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 68\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleOnePayment,\n        className: \"register\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Belopp att s\\xE4tta in\",\n            type: \"number\",\n            name: \"onepayment\",\n            required: true,\n            value: inputs.onepayment || \"\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Delimiter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"S\\xE4tt in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StylePayment2, {\n      children: [msgForUser.showMsgSubs ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: msgForUser.msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 39\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \" Prenumerationen kan avslutas n\\xE4rsomhelst  \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 66\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubscription,\n        className: \"register\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Belopp per m\\xE5nad\",\n            type: \"number\",\n            name: \"subscription\",\n            required: true,\n            value: inputs.subscription || \"\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Delimiter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Prenumerera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Payment, \"eXtcI/qMXQA2NPYv40NpLWMYOks=\");\n\n_c = Payment;\nexport default Payment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"sources":["C:/Users/Othor/dbwebb-kurser/frontendphp/webbclient/src/components/Payment/index.js"],"names":["React","useState","useContext","User","Api","AppContext","Content","Delimiter","StylePayment","StylePayment2","initialValue","showMsgSubs","showMsgOnePay","msg","Payment","myContext","inputs","setInputs","msgForUser","setMsgForUser","userName","user","username","handleChange","event","name","target","value","values","handleOnePayment","onepayment","res","updateUserFunds","preventDefault","handleSubscription","subscription","updateUserSubsc","useEffect"],"mappings":"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","sourcesContent":["import {React, useState, useContext} from \"react\";\n//components\nimport User from \"../../components/User/index.js\";\nimport Api from \"../../api.js\";\nimport AppContext from \"../../AppContext.js\";\n\n//styles\nimport { Content, Delimiter, StylePayment, StylePayment2} from \"./Form.styles.js\";\n\nconst initialValue = {\n    showMsgSubs: false,\n    showMsgOnePay: false,\n    msg: \"\"\n}\n\nconst Payment = () => {\n    const myContext = useContext(AppContext);\n    const [inputs, setInputs] = useState({});\n    const [msgForUser, setMsgForUser] = useState(initialValue);\n    let userName = myContext.user.username;\n\n    const handleChange = (event) => {\n        const name = event.target.name;\n        const value = event.target.value;\n        setInputs(values => ({...values, [name]: value}))\n    }\n\n    const handleOnePayment = async (event)  => {\n\n        if (inputs && inputs.onepayment > 0) {\n            const res = await Api.updateUserFunds(inputs.onepayment, userName)\n            setInputs(null)\n            if (res == \"OK\") {\n                setMsgForUser(\"Din insättning har gått igenom och dina pengar bör nu synas på ditt konto \")\n                return\n            } \n            setMsgForUser(\"Något gick fel.. testa igen \")\n            \n        }\n        event.preventDefault();\n    }\n\n    // KOLLA vad meddelandena blir här från backend\n    const handleSubscription = async (event)  => {\n\n        if (inputs && inputs.subscription > 0) {\n            const res = await Api.updateUserSubsc(inputs.subscription, userName)\n            setInputs(null)\n            if (res == \"OK\") {\n                setMsgForUser(\"Din prenumeration är nu godkänd\")\n                return\n            }\n            setMsgForUser(\"Något gick fel.. testa igen \")\n        }\n        event.preventDefault();\n    }\n\n    useEffect(() => {\n\n    }, [setMsgForUser, msgForUser])\n\n\treturn (\n        <Content>\n            <StylePayment>\n            {msgForUser.showMsgOnePay ? <p>{msgForUser.msg}</p> : (<p> Minsta möjliga insättning (100:-) </p>)}\n            <form onSubmit={handleOnePayment} className = \"register\">\n                <label >\n                <input\n                    placeholder=\"Belopp att sätta in\"\n                    type=\"number\" \n                    name=\"onepayment\"\n                    required\n                    value={inputs.onepayment || \"\"} \n                    onChange={handleChange}\n                />\n                </label>\n                <Delimiter></Delimiter>\n                <input type=\"submit\" value=\"Sätt in\" />\n            </form>\n            </StylePayment>\n            <StylePayment2>\n            {msgForUser.showMsgSubs ? <p>{msgForUser.msg}</p> : (<p> Prenumerationen kan avslutas närsomhelst  </p>)}\n            <form onSubmit={handleSubscription} className = \"register\">\n                <label >\n                <input\n                    placeholder=\"Belopp per månad\"\n                    type=\"number\" \n                    name=\"subscription\"\n                    required\n                    value={inputs.subscription || \"\"} \n                    onChange={handleChange}\n                />\n                </label>\n                <Delimiter></Delimiter>\n                <input type=\"submit\" value=\"Prenumerera\" />\n            </form>\n            </StylePayment2>\n        </Content>\n\t);\n}\n\nexport default Payment\n\n"]},"metadata":{},"sourceType":"module"}